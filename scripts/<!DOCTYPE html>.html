<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slider Fix</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="script.js"></script>
</head>
<body>
    <section id="jump">
        <h2>My latest works...</h2>
        <div class="slider-wrapper">
            <div class="slider-controls">
                <button id="prev">❮</button>
                <div class="slider-container">
                    <div class="slider-track">
                        <div class="slide">Slide 1</div>
                        <div class="slide">Slide 2</div>
                        <div class="slide">Slide 3</div>
                        <div class="slide">Slide 4</div>
                    </div>
                </div>
                <button id="next">❯</button>
            </div>
        </div>
        <div class="dots"></div>
    </section>
</body>
</html>

<style>
.slider-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    flex-direction: column;
}
.slider-controls {
    display: flex;
    align-items: center;
    gap: 10px;
}
.slider-container {
    overflow: hidden;
    width: 100%;
    max-width: 800px;
    position: relative;
}
.slider-track {
    display: flex;
    gap: 40px;
    transition: transform 0.5s ease-in-out;
    cursor: grab;
}
.slide {
    min-width: calc(50% - 20px);
    flex: 0 0 auto;
}
button {
    background: rgba(0, 0, 0, 0.5);
    color: white;
    border: none;
    cursor: pointer;
    padding: 10px;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
}
.dots {
    display: flex;
    justify-content: center;
    margin-top: 10px;
}
.dot {
    width: 10px;
    height: 10px;
    background: gray;
    margin: 5px;
    border-radius: 50%;
    cursor: pointer;
}
.dot.active {
    background: black;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const track = document.querySelector(".slider-track");
    const slides = document.querySelectorAll(".slide");
    const prevButton = document.getElementById("prev");
    const nextButton = document.getElementById("next");
    const dotsContainer = document.querySelector(".dots");
    let index = 1;
    const totalSlides = slides.length;
    const visibleSlides = 2;
    let isDragging = false;
    let startX = 0;

    // Clone first and last slides for infinite effect
    const firstClone = slides[0].cloneNode(true);
    const lastClone = slides[totalSlides - 1].cloneNode(true);
    track.insertBefore(lastClone, slides[0]);
    track.appendChild(firstClone);
    
    // Update slides after cloning
    const allSlides = document.querySelectorAll(".slide");
    const slideWidth = slides[0].offsetWidth + 40;
    track.style.transform = `translateX(-${index * slideWidth}px)`;

    // Create dots
    slides.forEach((_, i) => {
        const dot = document.createElement("div");
        dot.classList.add("dot");
        if (i === 0) dot.classList.add("active");
        dot.addEventListener("click", () => {
            index = i + 1;
            updateSlidePosition();
        });
        dotsContainer.appendChild(dot);
    });

    function updateSlidePosition(smooth = true) {
        track.style.transition = smooth ? "transform 0.5s ease-in-out" : "none";
        track.style.transform = `translateX(-${index * slideWidth}px)`;
        updateDots();
    }

    function updateDots() {
        document.querySelectorAll(".dot").forEach((dot, i) => {
            dot.classList.toggle("active", i === index - 1);
        });
    }

    function nextSlide() {
        if (index >= totalSlides) {
            index++;
            updateSlidePosition();
            setTimeout(() => {
                track.style.transition = "none";
                index = 1;
                updateSlidePosition(false);
            }, 500);
        } else {
            index++;
            updateSlidePosition();
        }
    }

    function prevSlide() {
        if (index <= 0) {
            index--;
            updateSlidePosition();
            setTimeout(() => {
                track.style.transition = "none";
                index = totalSlides;
                updateSlidePosition(false);
            }, 500);
        } else {
            index--;
            updateSlidePosition();
        }
    }

    nextButton.addEventListener("click", nextSlide);
    prevButton.addEventListener("click", prevSlide);

    track.addEventListener("mousedown", (e) => {
        isDragging = true;
        startX = e.clientX;
    });

    track.addEventListener("mousemove", (e) => {
        if (!isDragging) return;
        let moveX = e.clientX - startX;
        if (moveX > 50) {
            prevSlide();
            isDragging = false;
        } else if (moveX < -50) {
            nextSlide();
            isDragging = false;
        }
    });

    track.addEventListener("mouseup", () => {
        isDragging = false;
    });

    track.addEventListener("mouseleave", () => {
        isDragging = false;
    });

    setInterval(nextSlide, 3000);
});
</script>
